(function(window,$,undefined){var getComputedStyle=document.defaultView&&document.defaultView.getComputedStyle,rupper=/([A-Z])/g,rdashAlpha=/-([a-z])/ig,fcamelCase=function(e,t){return t.toUpperCase()},getStyle=function(e){if(getComputedStyle){return getComputedStyle(e,null)}else if(e.currentStyle){return e.currentStyle}},rfloat=/float/i,rnumpx=/^-?\d+(?:px)?$/i,rnum=/^-?\d/;$.styles=function(e,t){if(!e){return null}var n=getStyle(e),r,i,s=e.style,o={},u=0,a,f,l,c;for(;u<t.length;u++){c=t[u];r=c.replace(rdashAlpha,fcamelCase);if(rfloat.test(c)){c=$.support.cssFloat?"float":"styleFloat";r="cssFloat"}if(getComputedStyle){c=c.replace(rupper,"-$1").toLowerCase();i=n.getPropertyValue(c);if(c==="opacity"&&i===""){i="1"}o[r]=i}else{l=c.replace(rdashAlpha,fcamelCase);o[r]=n[c]||n[l];if(!rnumpx.test(o[r])&&rnum.test(o[r])){a=s.left;f=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left;s.left=l==="fontSize"?"1em":o[r]||0;o[r]=s.pixelLeft+"px";s.left=a;e.runtimeStyle.left=f}}}return o};$.fn.styles=function(){return $.styles(this[0],$.makeArray(arguments))};var animationNum=0,styleSheet=null,cache=[],browser=null,oldanimate=$.fn.animate,getStyleSheet=function(){if(!styleSheet){var e=document.createElement("style");e.setAttribute("type","text/css");e.setAttribute("media","screen");document.getElementsByTagName("head")[0].appendChild(e);if(!window.createPopup){e.appendChild(document.createTextNode(""))}styleSheet=e.sheet}return styleSheet},removeAnimation=function(e,t){for(var n=e.cssRules.length-1;n>=0;n--){var r=e.cssRules[n];if(r.type===7&&r.name==t){e.deleteRule(n);return}}},passThrough=function(e,t){var n=!(this[0]&&this[0].nodeType),r=!n&&$(this).css("display")==="inline"&&$(this).css("float")==="none";for(var i in e){if(e[i]=="show"||e[i]=="hide"||e[i]=="toggle"||$.isArray(e[i])||e[i]<0||i=="zIndex"||i=="z-index"||i=="scrollTop"||i=="scrollLeft"){return true}}return e.jquery===true||getBrowser()===null||$.isEmptyObject(e)||t&&t.length==4||t&&typeof t[2]=="string"||$.isPlainObject(t)||r||n},cssValue=function(e,t){if(typeof t==="number"&&!$.cssNumber[e]){return t+="px"}return t},getBrowser=function(){if(!browser){var e,t=document.createElement("fakeelement"),n={transition:{transitionEnd:"transitionEnd",prefix:""},MozTransition:{transitionEnd:"animationend",prefix:"-moz-"},WebkitTransition:{transitionEnd:"webkitAnimationEnd",prefix:"-webkit-"}};for(e in n){if(t.style[e]!==undefined){browser=n[e]}}}return browser},ffProps={top:function(e){return e.position().top},left:function(e){return e.position().left},width:function(e){return e.width()},height:function(e){return e.height()},fontSize:function(e){return"1em"}},addPrefix=function(e){var t={};$.each(e,function(e,n){t[getBrowser().prefix+e]=n});return t},getAnimation=function(e){var t,n,r;$.each(cache,function(t,r){if(e===r.style){n=r.name;r.age=0}else{r.age+=1}});if(!n){t=getStyleSheet();n="jquerypp_animation_"+animationNum++;t.insertRule("@"+getBrowser().prefix+"keyframes "+n+" "+e,t.cssRules&&t.cssRules.length||0);cache.push({name:n,style:e,age:0});cache.sort(function(e,t){return e.age-t.age});if(cache.length>20){r=cache.pop();removeAnimation(t,r.name)}}return n};$.fn.animate=function(e,t,n,r){if(passThrough.apply(this,arguments)){return oldanimate.apply(this,arguments)}var i=$.speed(t,n,r);this.queue(i.queue,function(t){var n,r=[],s="",o,u=$(this),a=i.duration,f,l,c="{ from {",h=function(e,t){u.css(e);u.css(addPrefix({"animation-duration":"","animation-name":"","animation-fill-mode":"","animation-play-state":""}));if($.isFunction(i.old)&&t){i.old.call(u[0],true)}$.removeData(u,l,true)},p=function(){h(e,true);t()};for(o in e){r.push(o)}if(getBrowser().prefix==="-moz-"){$.each(r,function(e,t){var n=ffProps[$.camelCase(t)];if(n&&u.css(t)=="auto"){u.css(t,n(u))}})}n=u.styles.apply(u,r);$.each(r,function(t,r){var i=r.replace(/([A-Z]|^ms)/g,"-$1").toLowerCase();c+=i+" : "+cssValue(r,n[r])+"; ";s+=i+" : "+cssValue(r,e[r])+"; "});c+="} to {"+s+" }}";f=getAnimation(c);l=f+".run";$._data(this,l,{stop:function(t){u.css(addPrefix({"animation-play-state":"paused"}));u.off(getBrowser().transitionEnd,p);if(!t){h(u.styles.apply(u,r),false)}else{h(e,true)}}});u.css(addPrefix({"animation-duration":a+"ms","animation-name":f,"animation-fill-mode":"forwards"}));u.one(getBrowser().transitionEnd,p)});return this};$.fn.compare=function(e){try{e=e.jquery?e[0]:e}catch(t){return null}if(window.HTMLElement){var n=HTMLElement.prototype.toString.call(e);if(n=="[xpconnect wrapped native prototype]"||n=="[object XULElement]"||n==="[object Window]"){return null}}if(this[0].compareDocumentPosition){return this[0].compareDocumentPosition(e)}if(this[0]==document&&e!=document)return 8;var r=(this[0]!==e&&this[0].contains(e)&&16)+(this[0]!=e&&e.contains(this[0])&&8),i=document.documentElement;if(this[0].sourceIndex){r+=this[0].sourceIndex<e.sourceIndex&&4;r+=this[0].sourceIndex>e.sourceIndex&&2;r+=(this[0].ownerDocument!==e.ownerDocument||this[0]!=i&&this[0].sourceIndex<=0||e!=i&&e.sourceIndex<=0)&&1}return r};$.toJSON=function(e,t,n,r){if(typeof JSON=="object"&&JSON.stringify)return JSON.stringify(e,t,n);if(!r&&$.isFunction(t))e=t("",e);if(typeof n=="number")n="          ".substring(0,n);n=typeof n=="string"?n.substring(0,10):"";var i=typeof e;if(e===null)return"null";if(i=="undefined"||i=="function")return undefined;if(i=="number"||i=="boolean")return e+"";if(i=="string")return $.quoteString(e);if(i=="object"){if(typeof e.toJSON=="function")return $.toJSON(e.toJSON(),t,n,true);if(e.constructor===Date){var s=e.getUTCMonth()+1;if(s<10)s="0"+s;var o=e.getUTCDate();if(o<10)o="0"+o;var u=e.getUTCFullYear();var a=e.getUTCHours();if(a<10)a="0"+a;var f=e.getUTCMinutes();if(f<10)f="0"+f;var l=e.getUTCSeconds();if(l<10)l="0"+l;var c=e.getUTCMilliseconds();if(c<100)c="0"+c;if(c<10)c="0"+c;return'"'+u+"-"+s+"-"+o+"T"+a+":"+f+":"+l+"."+c+'Z"'}var h=$.isFunction(t)?function(e,n){return t(e,n)}:function(e,t){return t},p=n?"\n":"",d=n?" ":"";if(e.constructor===Array){var v=[];for(var m=0;m<e.length;m++)v.push(($.toJSON(h(m,e[m]),t,n,true)||"null").replace(/^/gm,n));return"["+p+v.join(","+p)+p+"]"}var g=[],y;if($.isArray(t)){y=$.map(t,function(e){return typeof e=="string"||typeof e=="number"?e+"":null})}for(var b in e){var w,E,i=typeof b;if(y&&$.inArray(b+"",y)==-1)continue;if(i=="number")w='"'+b+'"';else if(i=="string")w=$.quoteString(b);else continue;E=$.toJSON(h(b,e[b]),t,n,true);if(typeof E=="undefined")continue;g.push((w+":"+d+E).replace(/^/gm,n))}return"{"+p+g.join(","+p)+p+"}"}};$.evalJSON=function(src){if(typeof JSON=="object"&&JSON.parse)return JSON.parse(src);return eval("("+src+")")};$.secureEvalJSON=function(src){if(typeof JSON=="object"&&JSON.parse)return JSON.parse(src);var filtered=src;filtered=filtered.replace(/\\["\\\/bfnrtu]/g,"@");filtered=filtered.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]");filtered=filtered.replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(filtered))return eval("("+src+")");else throw new SyntaxError("Error parsing JSON, source is not valid.")};$.quoteString=function(e){if(e.match(_escapeable)){return'"'+e.replace(_escapeable,function(e){var t=_meta[e];if(typeof t==="string")return t;t=e.charCodeAt();return"\\u00"+Math.floor(t/16).toString(16)+(t%16).toString(16)})+'"'}return'"'+e+'"'};var _escapeable=/["\\\x00-\x1f\x7f-\x9f]/g;var _meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};$.cookie=function(e,t,n){if(typeof t!="undefined"){n=n||{};if(t===null){t="";n.expires=-1}if(typeof t=="object"&&$.toJSON){t=$.toJSON(t)}var r="";if(n.expires&&(typeof n.expires=="number"||n.expires.toUTCString)){var i;if(typeof n.expires=="number"){i=new Date;i.setTime(i.getTime()+n.expires*24*60*60*1e3)}else{i=n.expires}r="; expires="+i.toUTCString()}var s=n.path?"; path="+n.path:"";var o=n.domain?"; domain="+n.domain:"";var u=n.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),r,s,o,u].join("")}else{var a=null;if(document.cookie&&document.cookie!=""){var f=document.cookie.split(";");for(var l=0;l<f.length;l++){var c=$.trim(f[l]);if(c.substring(0,e.length+1)==e+"="){a=decodeURIComponent(c.substring(e.length+1));break}}}if($.evalJSON&&a&&a.match(/^\s*\{/)){try{a=$.evalJSON(a)}catch(h){}}return a}};var weird=/button|select/i,getBoxes={},checks={width:["Left","Right"],height:["Top","Bottom"],oldOuterHeight:$.fn.outerHeight,oldOuterWidth:$.fn.outerWidth,oldInnerWidth:$.fn.innerWidth,oldInnerHeight:$.fn.innerHeight},supportsSetter=$.fn.jquery>="1.8.0";$.each({width:"Width",height:"Height"},function(e,t){getBoxes[e]=function(t,n){var r=0;if(!weird.test(t.nodeName)){var i=[];$.each(checks[e],function(){var e=this;$.each(n,function(t,n){if(n)i.push(t+e+(t=="border"?"Width":""))})});$.each($.styles(t,i),function(e,t){r+=parseFloat(t)||0})}return r};if(!supportsSetter){$.fn["outer"+t]=function(n,r){var i=this[0];if(typeof n=="number"){i&&this[e](n-getBoxes[e](i,{padding:true,border:true,margin:r}));return this}else{return i?checks["oldOuter"+t].apply(this,arguments):null}};$.fn["inner"+t]=function(n){var r=this[0];if(typeof n=="number"){r&&this[e](n-getBoxes[e](r,{padding:true}));return this}else{return r?checks["oldInner"+t].apply(this,arguments):null}}}var n=function(t){return function(n){if(n[supportsSetter?"pos":"state"]==0){n.start=$(n.elem)[e]();n.end=n.end-getBoxes[e](n.elem,t)}n.elem.style[e]=n.pos*(n.end-n.start)+n.start+"px"}};$.fx.step["outer"+t]=n({padding:true,border:true});$.fx.step["outer"+t+"Margin"]=n({padding:true,border:true,margin:true});$.fx.step["inner"+t]=n({padding:true})});var keyBreaker=/[^\[\]]+/g,convertValue=function(e){if($.isNumeric(e)){return parseFloat(e)}else if(e==="true"){return true}else if(e==="false"){return false}else if(e===""||e===null){return undefined}return e},nestData=function(e,t,n,r,i,s,o){var u=r.shift();o=o?o+"."+u:u;if(r.length){if(!n[u]){n[u]={}}nestData(e,t,n[u],r,i,s,o)}else{if(o in s&&t!="radio"&&!$.isArray(n[u])){if(u in n){n[u]=[n[u]]}else{n[u]=[]}}else{s[o]=true}if((t=="radio"||t=="checkbox")&&!e.is(":checked")){return}if(!n[u]){n[u]=i}else{n[u].push(i)}}};$.fn.extend({formParams:function(e){var t;if(!!e===e){t=e;e=null}if(e){return this.setParams(e)}else{return this.getParams(t)}},setParams:function(e){this.find("[name]").each(function(){var t=$(this),n=e[t.attr("name")];if(n!==undefined){if(t.is(":radio")){if(t.val()==n){t.attr("checked",true)}}else if(t.is(":checkbox")){n=$.isArray(n)?n:[n];if($.inArray(t.val(),n)>-1){t.attr("checked",true)}}else{t.val(n)}}})},getParams:function(e){var t={},n={},r;this.find("[name]:not(:disabled)").each(function(){var r=$(this),i=r.attr("type"),s=r.attr("name"),o=r.val(),u;if(i=="submit"||!s){return}u=s.match(keyBreaker);if(!u.length){u=[s]}if(e){o=convertValue(o)}nestData(r,i,t,u,o,n)});return t}});$.fn.range=function(){return $.Range(this[0])};var convertType=function(e){return e.replace(/([a-z])([a-z]+)/gi,function(e,t,n){return t+n.toLowerCase()}).replace(/_/g,"")},reverse=function(e){return e.replace(/^([a-z]+)_TO_([a-z]+)/i,function(e,t,n){return n+"_TO_"+t})},getWindow=function(e){return e?e.ownerDocument.defaultView||e.ownerDocument.parentWindow:window},bisect=function(e,t,n){if(n-t==1){return}},support={};$.Range=function(e){if(this.constructor!==$.Range){return new $.Range(e)}if(e&&e.jquery){e=e[0]}if(!e||e.nodeType){this.win=getWindow(e);if(this.win.document.createRange){this.range=this.win.document.createRange()}else if(this.win&&this.win.document.body&&this.win.document.body.createTextRange){this.range=this.win.document.body.createTextRange()}if(e){this.select(e)}}else if(e.clientX!=null||e.pageX!=null||e.left!=null){this.moveToPoint(e)}else if(e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches.length){this.moveToPoint(e.originalEvent.touches[0])}else if(e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches.length){this.moveToPoint(e.originalEvent.changedTouches[0])}else{this.range=e}};$.Range.current=function(e){var t=getWindow(e),n;if(t.getSelection){n=t.getSelection();return new $.Range(n.rangeCount?n.getRangeAt(0):t.document.createRange())}else{return new $.Range(t.document.selection.createRange())}};$.extend($.Range.prototype,{moveToPoint:function(e){var t=e.clientX,n=e.clientY;if(!t){var r=scrollOffset();t=(e.pageX||e.left||0)-r.left;n=(e.pageY||e.top||0)-r.top}if(support.moveToPoint){this.range=$.Range().range;this.range.moveToPoint(t,n);return this}var i=document.elementFromPoint(t,n);for(var s=0;s<i.childNodes.length;s++){var o=i.childNodes[s];if(o.nodeType===3||o.nodeType===4){var u=$.Range(o),a=u.toString().length;for(var f=1;f<a+1;f++){var l=u.end(f).rect();if(l.left<=t&&l.left+l.width>=t&&l.top<=n&&l.top+l.height>=n){u.start(f-1);this.range=u.range;return this}}}}var c;iterate(i.childNodes,function(t){var n=$.Range(t);if(n.rect().top>e.clientY){return false}else{c=n}});if(c){c.start(c.toString().length);this.range=c.range}else{this.range=$.Range(i).range}},window:function(){return this.win||window},overlaps:function(e){if(e.nodeType){e=$.Range(e).select(e)}var t=this.compare("START_TO_START",e),n=this.compare("END_TO_END",e);if(t<=0&&n>=0){return true}if(t>=0&&this.compare("START_TO_END",e)<=0){return true}if(this.compare("END_TO_START",e)>=0&&n<=0){return true}return false},collapse:function(e){this.range.collapse(e===undefined?true:e);return this},toString:function(){return typeof this.range.text=="string"?this.range.text:this.range.toString()},start:function(e){if(e===undefined){if(this.range.startContainer){return{container:this.range.startContainer,offset:this.range.startOffset}}else{var t=this.clone().collapse().parent();var n=$.Range(t).select(t).collapse();n.move("END_TO_START",this);return{container:t,offset:n.toString().length}}}else{if(this.range.setStart){if(typeof e=="number"){this.range.setStart(this.range.startContainer,e)}else if(typeof e=="string"){var r=callMove(this.range.startContainer,this.range.startOffset,parseInt(e,10));this.range.setStart(r.node,r.offset)}else{this.range.setStart(e.container,e.offset)}}else{if(typeof e=="string"){this.range.moveStart("character",parseInt(e,10))}else{var i=this.start().container,s;if(typeof e=="number"){s=e}else{i=e.container;s=e.offset}var o=$.Range(i).collapse();o.range.move(s);this.move("START_TO_START",o)}}return this}},end:function(e){if(e===undefined){if(this.range.startContainer){return{container:this.range.endContainer,offset:this.range.endOffset}}else{var t=this.clone().collapse(false).parent(),n=$.Range(t).select(t).collapse();n.move("END_TO_END",this);return{container:t,offset:n.toString().length}}}else{if(this.range.setEnd){if(typeof e=="number"){this.range.setEnd(this.range.endContainer,e)}else if(typeof e=="string"){var r=callMove(this.range.endContainer,this.range.endOffset,parseInt(e,10));this.range.setEnd(r.node,r.offset)}else{this.range.setEnd(e.container,e.offset)}}else{if(typeof e=="string"){this.range.moveEnd("character",parseInt(e,10))}else{var i=this.end().container,s;if(typeof e=="number"){s=e}else{i=e.container;s=e.offset}var o=$.Range(i).collapse();o.range.move(s);this.move("END_TO_START",o)}}return this}},parent:function(){if(this.range.commonAncestorContainer){return this.range.commonAncestorContainer}else{var e=this.range.parentElement(),t=this.range;iterate(e.childNodes,function(n){if($.Range(n).range.inRange(t)){e=n;return false}});return e}},rect:function(e){var t=this.range.getBoundingClientRect();if(!t.height&&!t.width){t=this.range.getClientRects()[0]}if(e==="page"){var n=scrollOffset();t=$.extend({},t);t.top+=n.top;t.left+=n.left}return t},rects:function(e){var t=$.map($.makeArray(this.range.getClientRects()).sort(function(e,t){return t.width*t.height-e.width*e.height}),function(e){return $.extend({},e)}),n=0,r,i=t.length;while(n<t.length){var s=t[n],o=false;r=n+1;while(r<t.length){if(withinRect(s,t[r])){if(!t[r].width){t.splice(r,1)}else{o=t[r];break}}else{r++}}if(o){t.splice(n,1)}else{n++}}if(e=="page"){var u=scrollOffset();return $.each(t,function(e,t){t.top+=u.top;t.left+=u.left})}return t}});(function(){var e=$.Range.prototype,t=$.Range().range;e.compare=t.compareBoundaryPoints?function(e,t){return this.range.compareBoundaryPoints(this.window().Range[reverse(e)],t.range)}:function(e,t){return this.range.compareEndPoints(convertType(e),t.range)};e.move=t.setStart?function(e,t){var n=t.range;switch(e){case"START_TO_END":this.range.setStart(n.endContainer,n.endOffset);break;case"START_TO_START":this.range.setStart(n.startContainer,n.startOffset);break;case"END_TO_END":this.range.setEnd(n.endContainer,n.endOffset);break;case"END_TO_START":this.range.setEnd(n.startContainer,n.startOffset);break}return this}:function(e,t){this.range.setEndPoint(convertType(e),t.range);return this};var n=t.cloneRange?"cloneRange":"duplicate",r=t.selectNodeContents?"selectNodeContents":"moveToElementText";e.clone=function(){return $.Range(this.range[n]())};e.select=t.selectNodeContents?function(e){if(!e){var t=this.window().getSelection();t.removeAllRanges();t.addRange(this.range)}else{this.range.selectNodeContents(e)}return this}:function(e){if(!e){this.range.select()}else if(e.nodeType===3){var t=e.parentNode,n=0,r;iterate(t.childNodes,function(t){if(t===e){r=n+t.nodeValue.length;return false}else{n=n+t.nodeValue.length}});this.range.moveToElementText(t);this.range.moveEnd("character",r-this.range.text.length);this.range.moveStart("character",n)}else{this.range.moveToElementText(e)}return this}})();var iterate=function(e,t){var n,r;for(var i=0;e[i];i++){n=e[i];if(n.nodeType===3||n.nodeType===4){if(t(n)===false){return false}}else if(n.nodeType!==8){if(iterate(n.childNodes,t)===false){return false}}}},isText=function(e){return e.nodeType===3||e.nodeType===4},iteratorMaker=function(e,t){return function(n,r){if(n[e]&&!r){return isText(n[e])?n[e]:arguments.callee(n[e])}else if(n[t]){return isText(n[t])?n[t]:arguments.callee(n[t])}else if(n.parentNode){return arguments.callee(n.parentNode,true)}}},getNextTextNode=iteratorMaker("firstChild","nextSibling"),getPrevTextNode=iteratorMaker("lastChild","previousSibling"),callMove=function(e,t,n){var r=n<0?getPrevTextNode:getNextTextNode;if(!isText(e)){e=e.childNodes[t]?e.childNodes[t]:e.lastChild;if(!isText(e)){e=r(e)}return move(e,n)}else{if(t+n<0){return move(r(e),t+n)}else{return move(e,t+n)}}},move=function(e,t){var n=t<0?getPrevTextNode:getNextTextNode;t=Math.abs(t);while(e&&t>=e.nodeValue.length){t=t-e.nodeValue.length;e=n(e)}return{node:e,offset:n===getNextTextNode?t:e.nodeValue.length-t}},supportWhitespace,isWhitespace=function(e){if(supportWhitespace==null){supportWhitespace="isElementContentWhitespace"in e}return supportWhitespace?e.isElementContentWhitespace:e.nodeType===3&&""==e.data.trim()},within=function(e,t){return e.left<=t.clientX&&e.left+e.width>=t.clientX&&e.top<=t.clientY&&e.top+e.height>=t.clientY},withinRect=function(e,t){return within(e,{clientX:t.left,clientY:t.top})&&within(e,{clientX:t.left+t.width,clientY:t.top})&&within(e,{clientX:t.left,clientY:t.top+t.height})&&within(e,{clientX:t.left+t.width,clientY:t.top+t.height})},scrollOffset=function(e){var e=e||window;doc=e.document.documentElement,body=e.document.body;return{left:(doc&&doc.scrollLeft||body&&body.scrollLeft||0)+(doc.clientLeft||0),top:(doc&&doc.scrollTop||body&&body.scrollTop||0)+(doc.clientTop||0)}};support.moveToPoint=!!$.Range().range.moveToPoint;var getWindow=function(e){return e?e.ownerDocument.defaultView||e.ownerDocument.parentWindow:window},getElementsSelection=function(e,t){var n=$.Range.current(e).clone(),r=$.Range(e).select(e);if(!n.overlaps(r)){return null}if(n.compare("START_TO_START",r)<1){startPos=0;n.move("START_TO_START",r)}else{fromElementToCurrent=r.clone();fromElementToCurrent.move("END_TO_START",n);startPos=fromElementToCurrent.toString().length}if(n.compare("END_TO_END",r)>=0){endPos=r.toString().length}else{endPos=startPos+n.toString().length}return{start:startPos,end:endPos,width:endPos-startPos}},getSelection=function(e){var t=getWindow(e);if(e.selectionStart!==undefined){if(document.activeElement&&document.activeElement!=e&&e.selectionStart==e.selectionEnd&&e.selectionStart==0){return{start:e.value.length,end:e.value.length,width:0}}return{start:e.selectionStart,end:e.selectionEnd,width:e.selectionEnd-e.selectionStart}}else if(t.getSelection){return getElementsSelection(e,t)}else{try{if(e.nodeName.toLowerCase()=="input"){var n=getWindow(e).document.selection.createRange(),r=e.createTextRange();r.setEndPoint("EndToStart",n);var i=r.text.length;return{start:i,end:i+n.text.length,width:n.text.length}}else{var s=getElementsSelection(e,t);if(!s){return s}var o=$.Range.current().clone(),u=o.clone().collapse().range,a=o.clone().collapse(false).range;u.moveStart("character",-1);a.moveStart("character",-1);if(s.startPos!=0&&u.text==""){s.startPos+=2}if(s.endPos!=0&&a.text==""){s.endPos+=2}return s}}catch(f){return{start:e.value.length,end:e.value.length,width:0}}}},select=function(e,t,n){var r=getWindow(e);if(e.setSelectionRange){if(n===undefined){e.focus();e.setSelectionRange(t,t)}else{e.select();e.selectionStart=t;e.selectionEnd=n}}else if(e.createTextRange){var i=e.createTextRange();i.moveStart("character",t);n=n||t;i.moveEnd("character",n-e.value.length);i.select()}else if(r.getSelection){var s=r.document,o=r.getSelection(),u=s.createRange(),a=[t,n!==undefined?n:t];getCharElement([e],a);u.setStart(a[0].el,a[0].count);u.setEnd(a[1].el,a[1].count);o.removeAllRanges();o.addRange(u)}else if(r.document.body.createTextRange){var u=document.body.createTextRange();u.moveToElementText(e);u.collapse();u.moveStart("character",t);u.moveEnd("character",n!==undefined?n:t);u.select()}},replaceWithLess=function(e,t,n,r){if(typeof n[0]==="number"&&n[0]<t){n[0]={el:r,count:n[0]-e}}if(typeof n[1]==="number"&&n[1]<=t){n[1]={el:r,count:n[1]-e};}},getCharElement=function(e,t,n){var r,i;n=n||0;for(var s=0;e[s];s++){r=e[s];if(r.nodeType===3||r.nodeType===4){i=n;n+=r.nodeValue.length;replaceWithLess(i,n,t,r)}else if(r.nodeType!==8){n=getCharElement(r.childNodes,t,n)}}return n};$.fn.selection=function(e,t){if(e!==undefined){return this.each(function(){select(this,e,t)})}else{return getSelection(this[0])}};$.fn.selection.getCharElement=getCharElement;var withinBox=function(e,t,n,r,i,s){return t>=r&&t<r+s&&e>=n&&e<n+i};$.fn.within=function(e,t,n){var r=[];this.each(function(){var i=jQuery(this);if(this==document.documentElement){return r.push(this)}var s=n?$.data(this,"offsetCache")||$.data(this,"offsetCache",i.offset()):i.offset();var o=withinBox(e,t,s.left,s.top,this.offsetWidth,this.offsetHeight);if(o){r.push(this)}});return this.pushStack($.unique(r),"within",e+","+t)};$.fn.withinBox=function(e,t,n,r,i){var s=[];this.each(function(){var o=jQuery(this);if(this==document.documentElement)return s.push(this);var u=i?$.data(this,"offset")||$.data(this,"offset",o.offset()):o.offset();var a=o.width(),f=o.height(),l=!(u.top>t+r||u.top+f<t||u.left>e+n||u.left+a<e);if(l)s.push(this)});return this.pushStack($.unique(s),"withinBox",$.makeArray(arguments).join(","))};$.fn.triggerAsync=function(e,t,n,r){if(typeof t=="function"){r=n;n=t;t=undefined}if(this.length){var i=this;setTimeout(function(){i.trigger({type:e,_success:n,_prevented:r},t)},0)}else{if(n)n.call(this)}return this};var types={},rnamespaces=/\.(.*)$/,$event=$.event;$event.special["default"]={add:function(e){types[e.namespace.replace(rnamespaces,"")]=true},setup:function(){return true}};var oldTrigger=$event.trigger;$event.trigger=function(t,n,r,i){var s=t.type||t,t=typeof t==="object"?t[$.expando]?t:new $.Event(s,t):new $.Event(s),o=oldTrigger.call($.event,t,n,r,i),u=t.isPaused&&t.isPaused();if(!i&&!t.isDefaultPrevented()&&t.type.indexOf("default")!==0){oldTrigger("default."+t.type,n,r);if(t._success){t._success(t)}}if(!i&&t.isDefaultPrevented()&&t.type.indexOf("default")!==0&&!u){if(t._prevented){t._prevented(t)}}if(u){t.isDefaultPrevented=t.pausedState.isDefaultPrevented;t.isPropagationStopped=t.pausedState.isPropagationStopped}return o};var oldClean=$.cleanData;$.cleanData=function(e){for(var t=0,n;(n=e[t])!==undefined;t++){$(n).triggerHandler("destroyed")}oldClean(e)};var getSetZero=function(e){return e!==undefined?this.array[0]=e:this.array[0]},getSetOne=function(e){return e!==undefined?this.array[1]=e:this.array[1]};$.Vector=function(e){var t=$.isArray(e)?e:$.makeArray(arguments);this.update(t)};$.Vector.prototype={app:function(e){var t,n=[];for(t=0;t<this.array.length;t++){n.push(e(this.array[t],t))}return new $.Vector(n)},plus:function(){var e,t=arguments[0]instanceof $.Vector?arguments[0].array:$.makeArray(arguments),n=this.array.slice(0),r=new $.Vector;for(e=0;e<t.length;e++){n[e]=(n[e]?n[e]:0)+t[e]}return r.update(n)},minus:function(){var e,t=arguments[0]instanceof $.Vector?arguments[0].array:$.makeArray(arguments),n=this.array.slice(0),r=new $.Vector;for(e=0;e<t.length;e++){n[e]=(n[e]?n[e]:0)-t[e]}return r.update(n)},equals:function(){var e,t=arguments[0]instanceof $.Vector?arguments[0].array:$.makeArray(arguments),n=this.array.slice(0),r=new $.Vector;for(e=0;e<t.length;e++){if(n[e]!=t[e]){return null}}return r.update(n)},x:getSetZero,left:getSetZero,width:getSetZero,y:getSetOne,top:getSetOne,height:getSetOne,toString:function(){return"("+this.array.join(", ")+")"},update:function(e){var t;if(this.array){for(t=0;t<this.array.length;t++){delete this.array[t]}}this.array=e;for(t=0;t<e.length;t++){this[t]=this.array[t]}return this}};$.Event.prototype.vector=function(){var e="ontouchend"in document&&this.originalEvent.touches&&this.originalEvent.touches.length?this.originalEvent.changedTouches[0]:this;if(this.originalEvent.synthetic){var t=document.documentElement,n=document.body;return new $.Vector(e.clientX+(t&&t.scrollLeft||n&&n.scrollLeft||0)-(t.clientLeft||0),e.clientY+(t&&t.scrollTop||n&&n.scrollTop||0)-(t.clientTop||0))}else{return new $.Vector(e.pageX,e.pageY)}};$.fn.offsetv=function(){if(this[0]==window){return new $.Vector(window.pageXOffset?window.pageXOffset:document.documentElement.scrollLeft,window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop)}else{var e=this.offset();return new $.Vector(e.left,e.top)}};$.fn.dimensionsv=function(e){if(this[0]==window||!e){return new $.Vector(this.width(),this.height())}else{return new $.Vector(this[e+"Width"](),this[e+"Height"]())}};var event=$.event,findHelper=function(e,t,n,r){var i,s,o,u,a,f,l,c,h;for(i=0;i<t.length;i++){s=t[i];u=s.indexOf(".")<0;if(!u){l=s.split(".");s=l.shift();c=new RegExp("(^|\\.)"+l.slice(0).sort().join("\\.(?:.*\\.)?")+"(\\.|$)")}o=(e[s]||[]).slice(0);for(a=0;a<o.length;a++){f=o[a];h=u||c.test(f.namespace);if(h){if(r){if(f.selector===r){n(s,f.origHandler||f.handler)}}else if(r===null){n(s,f.origHandler||f.handler,f.selector)}else if(!f.selector){n(s,f.origHandler||f.handler)}}}}};event.find=function(e,t,n){var r=($._data(e)||{}).events,i=[],s,o,u;if(!r){return i}findHelper(r,t,function(e,t){i.push(t)},n);return i};event.findBySelector=function(e,t){var n=$._data(e).events,r={},i=function(e,t,n){var i=r[e]||(r[e]={}),s=i[t]||(i[t]=[]);s.push(n)};if(!n){return r}findHelper(n,t,function(e,t,n){i(n||"",e,t)},null);return r};event.supportTouch="ontouchend"in document;$.fn.respondsTo=function(e){if(!this.length){return false}else{return event.find(this[0],$.isArray(e)?e:[e]).length>0}};$.fn.triggerHandled=function(e,t){e=typeof e=="string"?$.Event(e):e;this.trigger(e,t);return e.handled};event.setupHelper=function(e,t,n){if(!n){n=t;t=null}var r=function(r){var i,s=r.selector||"",o=r.namespace?"."+r.namespace:"";if(s){i=event.find(this,e,s);if(!i.length){$(this).delegate(s,t+o,n)}}else{if(!event.find(this,e,s).length){event.add(this,t+o,n,{selector:s,delegate:this})}}},i=function(r){var i,s=r.selector||"";if(s){i=event.find(this,e,s);if(!i.length){$(this).undelegate(s,t,n)}}else{if(!event.find(this,e,s).length){event.remove(this,t,n,{selector:s,delegate:this})}}};$.each(e,function(){event.special[this]={add:r,remove:i,setup:function(){},teardown:function(){}}})};$.event.reverse=function(e,t){var n=$(),r=0,i=$.event.handle||$.event.dispatch;$.event.special[e]={setup:function(){if(this!==window){n.push(this);$.unique(n)}return this!==window},teardown:function(){n=n.not(this);return this!==window},add:function(e){var s=e.handler;e.origHandler=s;e.handler=function(s,o){var u=this===window;if(t&&t.handler){var a=t.handler.apply(this,arguments);if(a===true){return}}if(r===0){r++;var f=o===false?s.target:this;i.call(f,s,o);if(s.isPropagationStopped()){r--;return}var l=n.index(this),c=n.length,h,p;while(++l<c&&(h=n[l])&&(u||$.contains(f,h))){i.call(h,s,o);if(s.isPropagationStopped()){while(++l<c&&(p=n[l])){if(!$.contains(h,p)){l--;break}}}}s.stopImmediatePropagation();r--}else{e.origHandler.call(this,s,o)}}}};$([document,window]).bind(e,function(){});return $.event.special[e]};if(!$.event.special.move){$.event.reverse("move")}var bind=function(e,t){var n=Array.prototype.slice.call(arguments,2);return function(){var r=[this].concat(n,$.makeArray(arguments));return t.apply(e,r)}},event=$.event,clearSelection=window.getSelection?function(){window.getSelection().removeAllRanges()}:function(){},supportTouch="ontouchend"in document,startEvent=supportTouch?"touchstart":"mousedown",stopEvent=supportTouch?"touchend":"mouseup",moveEvent=supportTouch?"touchmove":"mousemove",preventTouchScroll=function(e){e.preventDefault()};$.Drag=function(){};$.extend($.Drag,{lowerName:"drag",current:null,distance:0,mousedown:function(e,t){var n=e.button===0||e.button==1,r=n||supportTouch;if(!r||this.current){return}var i=new $.Drag,s=e.delegateTarget||t,o=e.handleObj.selector,u=this;this.current=i;i.setup({element:t,delegate:e.delegateTarget||t,selector:e.handleObj.selector,moved:false,_distance:this.distance,callbacks:{dragdown:event.find(s,["dragdown"],o),draginit:event.find(s,["draginit"],o),dragover:event.find(s,["dragover"],o),dragmove:event.find(s,["dragmove"],o),dragout:event.find(s,["dragout"],o),dragend:event.find(s,["dragend"],o),dragcleanup:event.find(s,["dragcleanup"],o)},destroyed:function(){u.current=null}},e)}});$.extend($.Drag.prototype,{setup:function(e,t){$.extend(this,e);this.element=$(this.element);this.event=t;this.moved=false;this.allowOtherDrags=false;var n=bind(this,this.mousemove),r=bind(this,this.mouseup);this._mousemove=n;this._mouseup=r;this._distance=e.distance?e.distance:0;this.mouseStartPosition=t.vector();$(document).bind(moveEvent,n);$(document).bind(stopEvent,r);if(supportTouch){$(document).bind(moveEvent,preventTouchScroll)}if(!this.callEvents("down",this.element,t)){this.noSelection(this.delegate);clearSelection()}},destroy:function(){$(document).unbind(moveEvent,this._mousemove);$(document).unbind(stopEvent,this._mouseup);if(supportTouch){$(document).unbind(moveEvent,preventTouchScroll)}if(!this.moved){this.event=this.element=null}if(!supportTouch){this.selection(this.delegate)}this.destroyed()},mousemove:function(e,t){if(!this.moved){var n=Math.sqrt(Math.pow(t.pageX-this.event.pageX,2)+Math.pow(t.pageY-this.event.pageY,2));if(n<this._distance){return false}this.init(this.element,t);this.moved=true}this.element.trigger("move",this);var r=t.vector();if(this._start_position&&this._start_position.equals(r)){return}this.draw(r,t)},mouseup:function(e,t){if(this.moved){this.end(t)}this.destroy()},noSelection:function(e){e=e||this.delegate;document.documentElement.onselectstart=function(){return false};document.documentElement.unselectable="on";this.selectionDisabled=this.selectionDisabled?this.selectionDisabled.add(e):$(e);this.selectionDisabled.css("-moz-user-select","-moz-none")},selection:function(){if(this.selectionDisabled){document.documentElement.onselectstart=function(){};document.documentElement.unselectable="off";this.selectionDisabled.css("-moz-user-select","")}},init:function(e,t){e=$(e);var n=this.movingElement=this.element=$(e);this._cancelled=false;this.event=t;this.mouseElementPosition=this.mouseStartPosition.minus(this.element.offsetv());this.callEvents("init",e,t);if(this._cancelled===true){return}this.startPosition=n!=this.movingElement?this.movingElement.offsetv():this.currentDelta();this.makePositioned(this.movingElement);this.oldZIndex=this.movingElement.css("zIndex");this.movingElement.css("zIndex",1e3);if(!this._only&&this.constructor.responder){this.constructor.responder.compile(t,this)}},makePositioned:function(e){var t,n=e.css("position");if(!n||n=="static"){t={position:"relative"};if(window.opera){t.top="0px";t.left="0px"}e.css(t)}},callEvents:function(e,t,n,r){var i,s=this.callbacks[this.constructor.lowerName+e];for(i=0;i<s.length;i++){s[i].call(t,n,this,r)}return s.length},currentDelta:function(){return new $.Vector(parseInt(this.movingElement.css("left"),10)||0,parseInt(this.movingElement.css("top"),10)||0)},draw:function(e,t){if(this._cancelled){return}clearSelection();this.location=e.minus(this.mouseElementPosition);this.move(t);if(this._cancelled){return}if(!t.isDefaultPrevented()){this.position(this.location)}if(!this._only&&this.constructor.responder){this.constructor.responder.show(e,this,t)}},position:function(e){var t,n=this.currentDelta(),r=this.movingElement.offsetv().minus(n);this.required_css_position=e.minus(r);this.offsetv=e;t=this.movingElement[0].style;if(!this._cancelled&&!this._horizontal){t.top=this.required_css_position.top()+"px"}if(!this._cancelled&&!this._vertical){t.left=this.required_css_position.left()+"px"}},move:function(e){this.callEvents("move",this.element,e)},over:function(e,t){this.callEvents("over",this.element,e,t)},out:function(e,t){this.callEvents("out",this.element,e,t)},end:function(e){if(this._cancelled){return}if(!this._only&&this.constructor.responder){this.constructor.responder.end(e,this)}this.callEvents("end",this.element,e);if(this._revert){var t=this;this.movingElement.animate({top:this.startPosition.top()+"px",left:this.startPosition.left()+"px"},function(){t.cleanup.apply(t,arguments)})}else{this.cleanup(e)}this.event=null},cleanup:function(e){this.movingElement.css({zIndex:this.oldZIndex});if(this.movingElement[0]!==this.element[0]&&!this.movingElement.has(this.element[0]).length&&!this.element.has(this.movingElement[0]).length){this.movingElement.css({display:"none"})}if(this._removeMovingElement){this.movingElement.remove()}if(e){this.callEvents("cleanup",this.element,e)}this.movingElement=this.element=this.event=null},cancel:function(){this._cancelled=true;if(!this._only&&this.constructor.responder){this.constructor.responder.clear(this.event.vector(),this,this.event)}this.destroy()},ghost:function(e){var t=this.movingElement.clone().css("position","absolute");if(e){$(e).append(t)}else{$(this.movingElement).after(t)}t.width(this.movingElement.width()).height(this.movingElement.height());t.offset(this.movingElement.offset());this.movingElement=t;this.noSelection(t);this._removeMovingElement=true;return t},representative:function(e,t,n){this._offsetX=t||0;this._offsetY=n||0;var r=this.mouseStartPosition;this.movingElement=$(e);this.movingElement.css({top:r.y()-this._offsetY+"px",left:r.x()-this._offsetX+"px",display:"block",position:"absolute"}).show();this.noSelection(this.movingElement);this.mouseElementPosition=new $.Vector(this._offsetX,this._offsetY);return this},revert:function(e){this._revert=e===undefined?true:e;return this},vertical:function(){this._vertical=true;return this},horizontal:function(){this._horizontal=true;return this},only:function(e){return this._only=e===undefined?true:e},distance:function(e){if(e!==undefined){this._distance=e;return this}else{return this._distance}}});event.setupHelper(["dragdown","draginit","dragover","dragmove","dragout","dragend","dragcleanup"],startEvent,function(e){$.Drag.mousedown.call($.Drag,e,this)});var round=function(e,t){return Math.round(e/t)*t};$.Drag.prototype.step=function(e,t,n){if(typeof e=="number"){e={x:e,y:e}}t=t||$(document.body);this._step=e;var r=t.styles("borderTopWidth","paddingTop","borderLeftWidth","paddingLeft");var i=parseInt(r.borderTopWidth)+parseInt(r.paddingTop),s=parseInt(r.borderLeftWidth)+parseInt(r.paddingLeft);this._step.offset=t.offsetv().plus(s,i);this._step.center=n;return this};(function(){var e=$.Drag.prototype.position;$.Drag.prototype.position=function(t){if(this._step){var n=this._step,r=n.center&&n.center.toLowerCase(),i=this.movingElement.dimensionsv("outer"),s=n.offset.top()-(r&&r!="x"?i.height()/2:0),o=n.offset.left()-(r&&r!="y"?i.width()/2:0);if(this._step.x){t.left(Math.round(o+round(t.left()-o,this._step.x)))}if(this._step.y){t.top(Math.round(s+round(t.top()-s,this._step.y)))}}e.call(this,t)}})();$.Drag.prototype.limit=function(e,t){var n=e.styles("borderTopWidth","paddingTop","borderLeftWidth","paddingLeft"),r=new $.Vector(parseInt(n.borderLeftWidth,10)+parseInt(n.paddingLeft,10)||0,parseInt(n.borderTopWidth,10)+parseInt(n.paddingTop,10)||0);this._limit={offset:e.offsetv().plus(r),size:e.dimensionsv(),center:t===true?"both":t};return this};var oldPosition=$.Drag.prototype.position;$.Drag.prototype.position=function(e){if(this._limit){var t=this._limit,n=t.center&&t.center.toLowerCase(),r=this.movingElement.dimensionsv("outer"),i=n&&n!="x"?r.height()/2:0,s=n&&n!="y"?r.width()/2:0,o=t.offset.top(),u=t.offset.left(),a=t.size.height(),f=t.size.width();if(e.top()+i<o){e.top(o-i)}if(e.top()+r.height()-i>o+a){e.top(o+a-r.height()+i)}if(e.left()+s<u){e.left(u-s)}if(e.left()+r.width()-s>u+f){e.left(u+f-r.left()+s)}}oldPosition.call(this,e)};var event=$.event;var eventNames=["dropover","dropon","dropout","dropinit","dropmove","dropend"];$.Drop=function(e,t){$.extend(this,e);this.element=$(t)};$.each(eventNames,function(){event.special[this]={add:function(e){var t=$(this),n=t.data("dropEventCount")||0;t.data("dropEventCount",n+1);if(n==0){$.Drop.addElement(this)}},remove:function(){var e=$(this),t=e.data("dropEventCount")||0;e.data("dropEventCount",t-1);if(t<=1){$.Drop.removeElement(this)}}}});$.extend($.Drop,{lowerName:"drop",_rootElements:[],_elements:$(),last_active:[],endName:"dropon",addElement:function(e){for(var t=0;t<this._rootElements.length;t++){if(e==this._rootElements[t])return}this._rootElements.push(e)},removeElement:function(e){for(var t=0;t<this._rootElements.length;t++){if(e==this._rootElements[t]){this._rootElements.splice(t,1);return}}},sortByDeepestChild:function(e,t){var n=e.element.compare(t.element);if(n&16||n&4)return 1;if(n&8||n&2)return-1;return 0},isAffected:function(e,t,n){return n.element!=t.element&&n.element.within(e[0],e[1],n._cache).length==1},deactivate:function(e,t,n){t.out(n,e);e.callHandlers(this.lowerName+"out",e.element[0],n,t)},activate:function(e,t,n){t.over(n,e);e.callHandlers(this.lowerName+"over",e.element[0],n,t)},move:function(e,t,n){e.callHandlers(this.lowerName+"move",e.element[0],n,t)},compile:function(e,t){if(!this.dragging&&!t){return}else if(!this.dragging){this.dragging=t;this.last_active=[]}var n,r,i,s,o=[],u=this.dragging;for(var a=0;a<this._rootElements.length;a++){n=this._rootElements[a];var r=$.event.findBySelector(n,eventNames);for(i in r){s=i?jQuery(i,n):[n];for(var f=0;f<s.length;f++){if(this.addCallbacks(s[f],r[i],u)){o.push(s[f])}}}}this.add(o,e,u)},addCallbacks:function(e,t,n){var r=$.data(e,"_dropData");if(!r){$.data(e,"_dropData",new $.Drop(t,e));return true}else if(!n){var i=r;for(var s in t){i[s]=i[s]?i[s].concat(t[s]):t[s]}return false}},add:function(e,t,n,r){var i=0,s;while(i<e.length){s=$.data(e[i],"_dropData");s.callHandlers(this.lowerName+"init",e[i],t,n);if(s._canceled){e.splice(i,1)}else{i++}}this._elements.push.apply(this._elements,e)},show:function(e,t,n){var r=t.element;if(!this._elements.length)return;var i,s=[],o=true,u=0,a,f,l,c,h=this.last_active,p=[],d=this,v;while(u<this._elements.length){v=$.data(this._elements[u],"_dropData");if(!v){this._elements.splice(u,1)}else{u++;if(d.isAffected(e,t,v)){s.push(v)}}}s.sort(this.sortByDeepestChild);n.stopRespondPropagate=function(){o=false};l=s.slice();this.last_active=s;for(a=0;a<h.length;a++){f=h[a];u=0;while(c=l[u]){if(f==c){l.splice(u,1);break}else{u++}}if(!c){this.deactivate(f,t,n)}if(!o)return}for(var u=0;u<l.length;u++){this.activate(l[u],t,n);if(!o)return}for(u=0;u<s.length;u++){this.move(s[u],t,n);if(!o)return}},end:function(e,t){var n,r=this.lowerName+"end",i=$.Event(this.endName,e),s;for(var o=0;o<this.last_active.length;o++){n=this.last_active[o];if(this.isAffected(e.vector(),t,n)&&n[this.endName]){n.callHandlers(this.endName,null,i,t)}if(i.isPropagationStopped()){break}}for(var u=0;u<this._elements.length;u++){s=$.data(this._elements[u],"_dropData");s&&s.callHandlers(r,null,e,t)}this.clear()},clear:function(){this._elements.each(function(){$.removeData(this,"_dropData")});this._elements=$();delete this.dragging}});$.Drag.responder=$.Drop;$.extend($.Drop.prototype,{callHandlers:function(e,t,n,r){var i=this[e]?this[e].length:0;for(var s=0;s<i;s++){this[e][s].call(t||this.element[0],n,this,r)}},cache:function(e){this._cache=e!=null?e:true},cancel:function(){this._canceled=true}});$.Drag.prototype.scrolls=function(e,t){var e=$(e);for(var n=0;n<e.length;n++){this.constructor.responder._elements.push(e.eq(n).data("_dropData",new $.Scrollable(e[n],t))[0])}},$.Scrollable=function(e,t){this.element=jQuery(e);this.options=$.extend({distance:30,delta:function(e,t){return(t-e)/2},direction:"xy"},t);this.x=this.options.direction.indexOf("x")!=-1;this.y=this.options.direction.indexOf("y")!=-1};$.extend($.Scrollable.prototype,{init:function(e){this.element=jQuery(e)},callHandlers:function(e,t,n,r){this[e](t||this.element[0],n,this,r)},dropover:function(){},dropon:function(){this.clear_timeout()},dropout:function(){this.clear_timeout()},dropinit:function(){},dropend:function(){},clear_timeout:function(){if(this.interval){clearTimeout(this.interval);this.interval=null}},distance:function(e){return(30-e)/2},dropmove:function(e,t,n,r){this.clear_timeout();var i=t.vector(),s=$(e==document.documentElement?window:e),o=s.dimensionsv("outer"),u=s.offsetv(),a=u.y()+o.y()-i.y(),f=i.y()-u.y(),l=u.x()+o.x()-i.x(),c=i.x()-u.x(),h=0,p=0,d=this.options.distance;if(a<d&&this.y){p=this.options.delta(a,d)}else if(f<d&&this.y){p=-this.options.delta(f,d)}if(l<d&&this.options&&this.x){h=this.options.delta(l,d)}else if(c<d&&this.x){h=-this.options.delta(c,d)}if(h||p){var v=this;this.interval=setTimeout(function(){v.move($(e),r.movingElement,h,p,t,t.clientX,t.clientY,t.screenX,t.screenY)},15)}},move:function(e,t,n,r,i){e.scrollTop(e.scrollTop()+r);e.scrollLeft(e.scrollLeft()+n);t.trigger($.event.fix({type:"mousemove",clientX:i.clientX,clientY:i.clientY,screenX:i.screenX,screenY:i.screenY,pageX:i.pageX,pageY:i.pageY}))}});if(Object.defineProperties){var set=function(e,t,n){if(n!==undefined){Object.defineProperty(e,t,{value:n})}return n},special={pageX:function(e){if(!e){return}var t=this.target.ownerDocument||document;doc=t.documentElement;body=t.body;return e.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0)},pageY:function(e){if(!e){return}var t=this.target.ownerDocument||document;doc=t.documentElement;body=t.body;return e.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)},relatedTarget:function(e){if(!e){return}return e.fromElement===this.target?e.toElement:e.fromElement},metaKey:function(e){if(!e){return}return e.ctrlKey},which:function(e){if(!e){return}return e.charCode!=null?e.charCode:e.keyCode}};$.each($.event.keyHooks.props.concat($.event.mouseHooks.props).concat($.event.props),function(e,t){if(t!=="target"){(function(){Object.defineProperty($.Event.prototype,t,{get:function(){var e=this.originalEvent&&this.originalEvent[t];return this["_"+t]!==undefined?this["_"+t]:set(this,t,special[t]&&e===undefined?special[t].call(this,this.originalEvent):e)},set:function(e){this["_"+t]=e}})})()}});$.event.fix=function(e){if(e[$.expando]){return e}var t=e,e=$.Event(t);e.target=t.target;if(!e.target){e.target=t.srcElement||document}if(e.target.nodeType===3){e.target=e.target.parentNode}return e}}$.Hover=function(){this._delay=$.Hover.delay;this._distance=$.Hover.distance;this._leave=$.Hover.leave};$.extend($.Hover,{delay:100,distance:10,leave:0});$.extend($.Hover.prototype,{delay:function(e){this._delay=e;return this},distance:function(e){this._distance=e;return this},leave:function(e){this._leave=e;return this}});var event=$.event,handle=event.handle,onmouseenter=function(e){var t=e.delegateTarget||e.currentTarget;var n=e.handleObj.selector;var r=$.data(t,"_hover"+n);if(r){if(!r.forcing){r.forcing=true;clearTimeout(r.leaveTimer);var i=r.leaving?Math.max(0,r.hover.leave-(new Date-r.leaving)):r.hover.leave;var s=this;setTimeout(function(){r.callHoverLeave();onmouseenter.call(s,e)},i)}return}var o={pageX:e.pageX,pageY:e.pageY},u=0,a,f=this,l=false,c=e,h=new $.Hover,p,d=function(){$.each(event.find(t,["hoverleave"],n),function(){this.call(f,e,h)});g()},v=function(e){clearTimeout(p);u+=Math.pow(e.pageX-o.pageX,2)+Math.pow(e.pageY-o.pageY,2);o={pageX:e.pageX,pageY:e.pageY};c=e},m=function(e){clearTimeout(a);if(l){if(h._leave===0){d()}else{clearTimeout(p);r.leaving=new Date;p=r.leaveTimer=setTimeout(function(){d()},h._leave)}}else{g()}},g=function(){$(f).unbind("mouseleave",m);$(f).unbind("mousemove",v);$.removeData(t,"_hover"+n)},y=function(){$.each(event.find(t,["hoverenter"],n),function(){this.call(f,c,h)});l=true};r={callHoverLeave:d,hover:h};$.data(t,"_hover"+n,r);$(f).bind("mousemove",v).bind("mouseleave",m);$.each(event.find(t,["hoverinit"],n),function(){this.call(f,e,h)});if(h._delay===0){y()}else{a=setTimeout(function(){if(u<h._distance&&$(f).queue().length==0){y();return}else{u=0;a=setTimeout(arguments.callee,h._delay)}},h._delay)}};event.setupHelper(["hoverinit","hoverenter","hoverleave","hovermove"],"mouseenter",onmouseenter);var uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}};var keymap={},reverseKeyMap={},currentBrowser=uaMatch(navigator.userAgent).browser;$.event.key=function(e,t){if(e===undefined){return keymap}if(t===undefined){t=e;e=currentBrowser}if(!keymap[e]){keymap[e]={}}$.extend(keymap[e],t);if(!reverseKeyMap[e]){reverseKeyMap[e]={}}for(var n in t){reverseKeyMap[e][t[n]]=n}};$.event.key({"\b":"8","	":"9","\r":"13",shift:"16",ctrl:"17",alt:"18","pause-break":"19",caps:"20",escape:"27","num-lock":"144","scroll-lock":"145",print:"44","page-up":"33","page-down":"34",end:"35",home:"36",left:"37",up:"38",right:"39",down:"40",insert:"45","delete":"46"," ":"32",0:"48",1:"49",2:"50",3:"51",4:"52",5:"53",6:"54",7:"55",8:"56",9:"57",a:"65",b:"66",c:"67",d:"68",e:"69",f:"70",g:"71",h:"72",i:"73",j:"74",k:"75",l:"76",m:"77",n:"78",o:"79",p:"80",q:"81",r:"82",s:"83",t:"84",u:"85",v:"86",w:"87",x:"88",y:"89",z:"90",num0:"96",num1:"97",num2:"98",num3:"99",num4:"100",num5:"101",num6:"102",num7:"103",num8:"104",num9:"105","*":"106","+":"107","-":"109",".":"110","/":"111",";":"186","=":"187",",":"188","-":"189",".":"190","/":"191","`":"192","[":"219","\\":"220","]":"221","'":"222","left window key":"91","right window key":"92","select key":"93",f1:"112",f2:"113",f3:"114",f4:"115",f5:"116",f6:"117",f7:"118",f8:"119",f9:"120",f10:"121",f11:"122",f12:"123"});$.Event.prototype.keyName=function(){var e=this,t=/\w/,n=reverseKeyMap[currentBrowser][(e.keyCode||e.which)+""],r=String.fromCharCode(e.keyCode||e.which),i=e.charCode&&reverseKeyMap[currentBrowser][e.charCode+""],s=e.charCode&&String.fromCharCode(e.charCode);if(s&&t.test(s)){return s.toLowerCase()}if(i&&t.test(i)){return s.toLowerCase()}if(r&&t.test(r)){return r.toLowerCase()}if(n&&t.test(n)){return n.toLowerCase()}if(e.type=="keypress"){return e.keyCode?String.fromCharCode(e.keyCode):String.fromCharCode(e.which)}if(!e.keyCode&&e.which){return String.fromCharCode(e.which)}return reverseKeyMap[currentBrowser][e.keyCode+""]};var current,rnamespaces=/\.(.*)$/,returnFalse=function(){return false},returnTrue=function(){return true};$.Event.prototype.isPaused=returnFalse;$.Event.prototype.pause=function(){this.pausedState={isDefaultPrevented:this.isDefaultPrevented()?returnTrue:returnFalse,isPropagationStopped:this.isPropagationStopped()?returnTrue:returnFalse};this.stopImmediatePropagation();this.preventDefault();this.isPaused=returnTrue};$.Event.prototype.resume=function(){var e=this.handleObj,t=this.currentTarget;var n=$.event.special[e.origType],r=n&&n.handle;if(!n){$.event.special[e.origType]={}}$.event.special[e.origType].handle=function(i){if(i.handleObj===e&&i.currentTarget===t){if(!n){delete $.event.special[e.origType]}else{$.event.special[e.origType].handle=r}}};delete this.pausedState;this.isPaused=this.isImmediatePropagationStopped=returnFalse;if(!this.isPropagationStopped()){$.event.trigger(this,[],this.target)}};var win=$(window),windowWidth=0,windowHeight=0,timer;$(function(){windowWidth=win.width();windowHeight=win.height()});$.event.reverse("resize",{handler:function(e,t){var n=this===window;if(n&&e.originalEvent){var r=win.width(),i=win.height();if(r!=windowWidth||i!=windowHeight){windowWidth=r;windowHeight=i;clearTimeout(timer);timer=setTimeout(function(){win.trigger("resize")},1)}return true}}});var isPhantom=/Phantom/.test(navigator.userAgent),supportTouch=!isPhantom&&"ontouchend"in document,scrollEvent="touchmove scroll",touchStartEvent=supportTouch?"touchstart":"mousedown",touchStopEvent=supportTouch?"touchend":"mouseup",touchMoveEvent=supportTouch?"touchmove":"mousemove",data=function(e){var t=e.originalEvent.touches?e.originalEvent.touches[0]:e;return{time:(new Date).getTime(),coords:[t.pageX,t.pageY],origin:$(e.target)}};var swipe=$.event.swipe={delay:500,max:320,min:30};$.event.setupHelper(["swipe","swipeleft","swiperight","swipeup","swipedown"],touchStartEvent,function(e){function o(e){if(!t){return}n=data(e);if(Math.abs(t.coords[0]-n.coords[0])>10){e.preventDefault()}}var t=data(e),n,r=e.delegateTarget||e.currentTarget,i=e.handleObj.selector,s=this;$(document.documentElement).bind(touchMoveEvent,o).one(touchStopEvent,function(u){$(this).unbind(touchMoveEvent,o);if(t&&n){var a=Math.abs(t.coords[0]-n.coords[0]),f=Math.abs(t.coords[1]-n.coords[1]),l=Math.sqrt(a*a+f*f);if(n.time-t.time<swipe.delay&&l>=swipe.min&&l<=swipe.max){var c=["swipe"];if(a>=swipe.min&&f<swipe.min){c.push(t.coords[0]>n.coords[0]?"swipeleft":"swiperight")}else if(f>=swipe.min&&a<swipe.min){c.push(t.coords[1]<n.coords[1]?"swipedown":"swipeup")}$.each($.event.find(r,c,i),function(){this.call(s,e,{start:t,end:n})})}}t=n=undefined})})})(this,jQuery)